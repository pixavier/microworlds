<project name="VirKO_MW" app="Snap! 10.7.1, https://snap.berkeley.edu" version="2"><notes></notes><thumbnail>data:image/png;base64,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</thumbnail><scenes select="1"><scene name="VirKO_MW"><notes></notes><palette><category name="MQTT" color="143,0,100,1"/><category name="VirKO" color="0,116,143,1"/></palette><hidden></hidden><headers></headers><code></code><blocks><block-definition s="connect" type="command" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSetVar"><l>usermac</l><l>user001/CC50E3A8FA64</l></block><custom-block s="$cloudOutline MQTT connect to %s %mult%s"><l>broker.emqx.io</l><list></list></custom-block></script></block-definition><block-definition s="$cloudOutline MQTT connect to %&apos;broker&apos; %&apos;options&apos;" type="command" category="MQTT"><comment x="0" y="0" w="455" collapsed="false">Connect to a broker&#xD;&#xD;The options are not required but can be filled if needed&#xD;&#xD;1. username (some brokers need this)&#xD;2. password (some brokers need this)&#xD;3. keepalive (default time is 60 seconds but some brokers need a shorter time)&#xD;4. connection callback (ringed set of scripts to be run when connection is made or remade)&#xD;&#xD;ADVANCED: The brokers offered in the menu are accessed using default ports and  basepaths (if needed).  If accessing other brokers, the complete urls should be formed like this:&#xD;&#xD;siteURL:port/basepath &#xD;e.g mqtt.eclipseprojects.io:443/mqtt&#xD;&#xD;It is possible to have more than one connection to the same broker, for instance, using two different user/pass accounts simultaneously. To do this, add a connection id at the end of the broker:&#xD;&#xD;e.g mqtt.eclipseprojects.io:443/mqtt|1&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%s">broker.emqx.io<options>broker.emqx.io&#xD;mqtt.eclipseprojects.io&#xD;test.mosquitto.org&#xD;broker.xmqtt.net&#xD;broker.hivemq.com</options></input><input type="%mult%s" expand="username&#xD;password&#xD;keepalive&#xD;connection callback" max="4">​&#xD;​&#xD;60</input></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqtt.js</l></list></block><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqttExtension.js</l></list></block><block s="doSetVar"><l>options</l><custom-block s="sanitise options %l mask %l"><block var="options"/><l/></custom-block></block><block s="doDeclareVariables"><list><l>connection status</l><l>callback</l></list></block><block s="doSetVar"><l>connection status</l><l>connecting</l></block><block s="doSetVar"><l>callback</l><l></l></block><block s="doIf"><block s="reportIsA"><block s="reportListItem"><l>4</l><block var="options"/></block><l><option>command</option></l></block><script><block s="doSetVar"><l>callback</l><block s="reportListItem"><l>4</l><block var="options"/></block></block></script><list></list></block><block s="doSetVar"><l>options</l><block s="reportListAttribute"><l><option>json</option></l><block s="reportNewList"><list><block s="reportNewList"><list><l>username</l><block s="reportListItem"><l>1</l><block var="options"/></block></list></block><block s="reportNewList"><list><l>password</l><block s="reportListItem"><l>2</l><block var="options"/></block></list></block><block s="reportNewList"><list><l>keepalive</l><block s="reportListItem"><l>3</l><block var="options"/></block></list></block></list></block></block></block><block s="doApplyExtension"><l>mqt_connect(broker,callback,options)</l><list><block var="broker"/><block var="callback"/><block var="options"/></list></block><block s="doWaitUntil"><block s="reportNot"><block s="reportVariadicEquals"><list><block var="connection status"/><l>connecting</l></list></block></block></block><block s="doIf"><block s="reportNot"><block s="reportVariadicEquals"><list><block var="connection status"/><l>connected</l></list></block></block><script><block s="doApplyExtension"><l>err_error(msg)</l><list><block var="connection status"/></list></block></script><list></list></block></script></block-definition><block-definition s="$cloudOutline MQTT subscribe to %&apos;broker&apos; topic %&apos;topic&apos; $nl on each message run %&apos;callback&apos; %&apos;options&apos;" type="command" category="MQTT"><comment x="0" y="0" w="306.99999999999943" collapsed="false">Subscribe to a topic on a broker&#xD;&#xD;Make sure you have already run an MQTT connect block before using this one&#xD;&#xD;You should add a script to be run inside he grey ring.&#xD;&#xD;It will be run each time a message is received&#xD;&#xD;If you click on the arrow on the grey ring twice, you can use #1 and #2 inside your script.&#xD;&#xD;#1 will contain the received payload&#xD;&#xD;#2 will contain the received topic name&#xD;&#xD;The options are not required but can be filled if needed&#xD;&#xD;1. Subscribed QoS (0,1 or 2)  Note this will be downgraded if it exceeds the QoS of the stored message held on the broker &#xD;&#xD;2. Binary mode (boolean) Default (false) - payload is returned as text&#xD;&#xD;If true, payload returned as single column list of values in the range of 0 to 255..  </comment><header></header><code></code><translations></translations><inputs><input type="%s">broker.emqx.io<options>broker.emqx.io&#xD;mqtt.eclipseprojects.io&#xD;test.mosquitto.org&#xD;broker.xmqtt.net&#xD;broker.hivemq.com</options></input><input type="%s">name</input><input type="%cmdRing"></input><input type="%mult%s" expand="QoS&#xD;binary mode" max="2">0&#xD;false</input></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqtt.js</l></list></block><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqttExtension.js</l></list></block><block s="doSetVar"><l>options</l><custom-block s="sanitise options %l mask %l"><block var="options"/><block s="reportNewList"><list><l></l><block s="reportBoolean"><l><bool>true</bool></l></block></list></block></custom-block></block><block s="doSetVar"><l>options</l><block s="reportListAttribute"><l><option>json</option></l><block s="reportNewList"><list><block s="reportNewList"><list><l>qos</l><block s="reportListItem"><l>1</l><block var="options"/></block></list></block><block s="reportNewList"><list><l>mode</l><block s="reportListItem"><l>2</l><block var="options"/></block></list></block></list></block></block></block><block s="doApplyExtension"><l>mqt_sub(broker,topic,callback,options)</l><list><block var="broker"/><block var="topic"/><block var="callback"/><block var="options"/></list></block></script></block-definition><block-definition s="$cloudOutline MQTT publish to %&apos;broker&apos; topic %&apos;topic&apos; payload %&apos;payload&apos; %&apos;options&apos;" type="command" category="MQTT"><comment x="0" y="0" w="455" collapsed="false">Publish a message to an MQTT broker&#xD;&#xD;The options are not required but can be filled if needed&#xD;&#xD;1. QoS (quality of service 0,1 or 2 - see  https://www.emqx.com/en/blog/introduction-to-mqtt-qos)&#xD;&#xD;2. Retain flag (boolean)&#xD;&#xD;3. Binary mode (boolean).    Default (false) - the payload is published as text&#xD;&#xD;If set to true then payload is expected to be a single column list of values in the 0 to 255 range and is published to the broker as a buffer of bytes.&#xD;&#xD;Note:  If the payload is a list and you don&apos;t set the buffer mode option, it will be automatically be converted into JSON and sent as text. Note that many brokers are configured to limit the payload size to 1 MB.&#xD;&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%s">broker.emqx.io<options>broker.emqx.io&#xD;mqtt.eclipseprojects.io&#xD;test.mosquitto.org&#xD;broker.xmqtt.net&#xD;broker.hivemq.com</options></input><input type="%s">name</input><input type="%mlt">hello</input><input type="%mult%s" expand="QoS&#xD;retain flag&#xD;binary mode" max="3">0&#xD;false&#xD;false</input></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqtt.js</l></list></block><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqttExtension.js</l></list></block><block s="doSetVar"><l>options</l><custom-block s="sanitise options %l mask %l"><block var="options"/><block s="reportNewList"><list><l></l><block s="reportBoolean"><l><bool>true</bool></l></block><block s="reportBoolean"><l><bool>true</bool></l></block></list></block></custom-block></block><block s="doSetVar"><l>options</l><block s="reportListAttribute"><l><option>json</option></l><block s="reportNewList"><list><block s="reportNewList"><list><l>qos</l><block s="reportListItem"><l>1</l><block var="options"/></block></list></block><block s="reportNewList"><list><l>retain</l><block s="reportListItem"><l>2</l><block var="options"/></block></list></block><block s="reportNewList"><list><l>mode</l><block s="reportListItem"><l>3</l><block var="options"/></block></list></block></list></block></block></block><block s="doIf"><block s="reportNot"><block s="reportListItem"><l>2</l><block s="reportListItem"><l>3</l><block s="reportTextSplit"><block var="options"/><l><option>json</option></l></block></block></block></block><script><block s="doIf"><block s="reportIsA"><block var="payload"/><l><option>list</option></l></block><script><block s="doSetVar"><l>payload</l><block s="reportListAttribute"><l><option>json</option></l><block var="payload"/></block></block></script><list></list></block><block s="doIf"><block s="reportIsA"><block var="payload"/><l><option>number</option></l></block><script><block s="doSetVar"><l>payload</l><block s="reportJoinWords"><list><block var="payload"/></list></block></block></script><list></list></block></script><list></list></block><block s="doApplyExtension"><l>mqt_pub(broker,topic,payload,options)</l><list><block var="broker"/><block var="topic"/><block var="payload"/><block var="options"/></list></block></script></block-definition><block-definition s="$cloudOutline MQTT unsubscribe from %&apos;broker&apos; topic %&apos;topic&apos;" type="command" category="MQTT"><header></header><code></code><translations></translations><inputs><input type="%s">broker.emqx.io<options>broker.emqx.io&#xD;mqtt.eclipseprojects.io&#xD;test.mosquitto.org&#xD;broker.xmqtt.net&#xD;broker.hivemq.com</options></input><input type="%s">name</input></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqtt.js</l></list></block><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqttExtension.js</l></list></block><block s="doApplyExtension"><l>mqt_unsub(broker,topic)</l><list><block var="broker"/><block var="topic"/></list></block></script></block-definition><block-definition s="CO2 ppm" type="reporter" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/get/CO2PPM</l></list></block><block s="reportDate"><l><option>time in milliseconds</option></l></block><l></l><list></list></custom-block></block></script></block-definition><block-definition s="IAQ" type="reporter" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/get/IAQ</l></list></block><block s="reportDate"><l><option>time in milliseconds</option></l></block><l></l><list></list></custom-block></block></script></block-definition><block-definition s="humidity" type="reporter" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/get/humidity</l></list></block><block s="reportDate"><l><option>time in milliseconds</option></l></block><l></l><list></list></custom-block></block></script></block-definition><block-definition s="temperature" type="reporter" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/get/temperature</l></list></block><block s="reportDate"><l><option>time in milliseconds</option></l></block><l></l><list></list></custom-block></block></script></block-definition><block-definition s="pressure" type="reporter" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/get/pressure</l></list></block><block s="reportDate"><l><option>time in milliseconds</option></l></block><l></l><list></list></custom-block></block></script></block-definition><block-definition s="light level" type="reporter" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/get/lightLevel</l></list></block><block s="reportDate"><l><option>time in milliseconds</option></l></block><l></l><list></list></custom-block></block></script></block-definition><block-definition s="publish interval" type="reporter" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/get/publishInterval</l></list></block><block s="reportDate"><l><option>time in milliseconds</option></l></block><l></l><list></list></custom-block></block></script></block-definition><block-definition s="json data" type="reporter" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/get/jsData</l></list></block><block s="reportDate"><l><option>time in milliseconds</option></l></block><l></l><list></list></custom-block></block></script></block-definition><block-definition s="set publish interval %&apos;seconds&apos;" type="command" category="VirKO"><header></header><code></code><translations></translations><inputs><input type="%s">5</input></inputs></block-definition><block-definition s="LED on" type="command" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="$cloudOutline MQTT publish to %s topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/cmd/activateLEDs</l></list></block><l></l><list></list></custom-block></script></block-definition><block-definition s="LED off" type="command" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="$cloudOutline MQTT publish to %s topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/cmd/deactivateLEDs</l></list></block><l></l><list></list></custom-block></script></block-definition><block-definition s="enable move custom block to top" type="command" category="motion"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doRun"><block s="reportJSFunction"><list></list><l>if( CustomCommandBlockMorph.prototype._userMenu){&#xD;  CustomCommandBlockMorph.prototype.userMenu = CustomCommandBlockMorph.prototype._userMenu;&#xD;  delete CustomCommandBlockMorph.prototype._userMenu&#xD;}</l></block><list></list></block><block s="doRun"><block s="reportJSFunction"><list></list><l>if( !CustomCommandBlockMorph.prototype._userMenu){&#xD;  CustomCommandBlockMorph.prototype._userMenu = CustomCommandBlockMorph.prototype.userMenu;&#xD;}&#xD;&#xD;&#xD;&#xD;CustomCommandBlockMorph.prototype.userMenu = function(){&#xD;var&#xD; shiftClicked = world.currentKey === 16 &#xD; ,menu = this._userMenu();&#xD;&#xD; menu.addItem(&#xD;     "move block to top",&#xD;     function (){&#xD;       var rcvr = this.scriptTarget(),&#xD;           ide = this.parentThatIsA(IDE_Morph),&#xD;           def = this.isGlobal ? this.definition : rcvr.getMethod(this.blockSpec),&#xD;           spec = def.spec;&#xD;    &#xD;       if (this.isGlobal) {&#xD;          ide.stage.globalBlocks = ide.stage.globalBlocks.filter(item =&gt; item !== def);&#xD;          ide.stage.globalBlocks.unshift(def);&#xD;       } else {&#xD;          rcvr.customBlocks = rcvr.customBlocks.filter(item =&gt; item !== def);&#xD;          rcvr.customBlocks.unshift(def);&#xD;&#xD;       }&#xD;&#xD;       ide.flushPaletteCache();&#xD;       ide.refreshPalette();&#xD;       ide.recordUnsavedChanges();&#xD; &#xD;       }&#xD;    );&#xD;&#xD;return menu;&#xD;}&#xD;</l></block><list></list></block><block s="doRun"><block s="reportJSFunction"><list></list><l>if( CustomReporterBlockMorph.prototype._userMenu){&#xD;  CustomReporterBlockMorph.prototype.userMenu = CustomReporterBlockMorph.prototype._userMenu;&#xD;  delete CustomReporterBlockMorph.prototype._userMenu&#xD;}</l></block><list></list></block><block s="doRun"><block s="reportJSFunction"><list></list><l>if( !CustomReporterBlockMorph.prototype._userMenu){&#xD;  CustomReporterBlockMorph.prototype._userMenu = CustomReporterBlockMorph.prototype.userMenu;&#xD;}&#xD;&#xD;&#xD;&#xD;CustomReporterBlockMorph.prototype.userMenu = function(){&#xD;var&#xD; shiftClicked = world.currentKey === 16 &#xD; ,menu = this._userMenu();&#xD;&#xD; menu.addItem(&#xD;     "move block to top",&#xD;     function (){&#xD;       var rcvr = this.scriptTarget(),&#xD;           ide = this.parentThatIsA(IDE_Morph),&#xD;           def = this.isGlobal ? this.definition : rcvr.getMethod(this.blockSpec),&#xD;           spec = def.spec;&#xD;    &#xD;       if (this.isGlobal) {&#xD;          ide.stage.globalBlocks = ide.stage.globalBlocks.filter(item =&gt; item !== def);&#xD;          ide.stage.globalBlocks.unshift(def);&#xD;       } else {&#xD;          rcvr.customBlocks = rcvr.customBlocks.filter(item =&gt; item !== def);&#xD;          rcvr.customBlocks.unshift(def);&#xD;&#xD;       }&#xD;&#xD;       ide.flushPaletteCache();&#xD;       ide.refreshPalette();&#xD;       ide.recordUnsavedChanges();&#xD; &#xD;       }&#xD;    );&#xD;&#xD;return menu;&#xD;}&#xD;</l></block><list></list></block></script></block-definition><block-definition s="subscribe JSON data" type="command" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="$cloudOutline MQTT subscribe to %s topic %s %br on each message run %cmdRing %mult%s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/jsData</l></list></block><block s="reifyScript"><script><block s="doSetVar"><l>json data</l><block var="#1"/></block><block s="doSetVar"><l>topic</l><block var="#2"/></block></script><list><l>#1</l><l>#2</l></list></block><list></list></custom-block></script></block-definition><block-definition s="unsubscribe JSON data" type="command" category="VirKO"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="$cloudOutline MQTT unsubscribe from %s topic %s"><l>broker.emqx.io</l><block s="reportJoinWords"><list><block var="usermac"/><l>/jsData</l></list></block></custom-block></script></block-definition><block-definition s="$cloudOutline MQTT disconnect from %&apos;broker&apos;" type="command" category="MQTT"><header></header><code></code><translations></translations><inputs><input type="%s">all<options>all&#xD;broker.emqx.io&#xD;mqtt.eclipseprojects.io&#xD;test.mosquitto.org&#xD;broker.xmqtt.net&#xD;broker.hivemq.com</options></input></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqtt.js</l></list></block><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqttExtension.js</l></list></block><block s="doApplyExtension"><l>mqt_disconnect(broker)</l><list><block var="broker"/></list></block></script></block-definition><block-definition s="$cloudOutline MQTT response %&apos;broker&apos; topic %&apos;topic&apos; $nl reply %&apos;reply&apos; %&apos;options&apos;" type="command" category="MQTT"><comment x="0" y="0" w="292.22207031250036" collapsed="false">Options:&#xD;&#xD;1. Sub binary mode (boolean) Default (false) - received payload is returned as text. &#xD;&#xD;If true then subscribed, received payload is returned as single column list of values in the range of 0 to 255..  Default (false) - it is returned as text&#xD;&#xD;2.  Pub binary mode (boolean).  Default (false) - the payload is published as text.&#xD;&#xD;If set to true then published payload is expected to be a single column list of values in the 0 to 255 range and is published to the broker as a buffer of bytes.&#xD;&#xD;Note:  If the payload is a list and you don&apos;t set the buffer mode option, it will be automatically be converted into JSON and sent as text&#xD;&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%s">broker.emqx.io<options>broker.emqx.io&#xD;mqtt.eclipseprojects.io&#xD;test.mosquitto.org&#xD;broker.xmqtt.net&#xD;broker.hivemq.com</options></input><input type="%s">name/#</input><input type="%repRing"></input><input type="%mult%s" expand="sub binary mode&#xD;pub binary mode" max="2">false&#xD;false</input></inputs><script><block s="doDeclareVariables"><list><l>resp</l><l>callbackTopic</l><l>error</l></list></block><block s="doSetVar"><l>options</l><custom-block s="sanitise options %l mask %l"><block var="options"/><block s="reportNewList"><list><block s="reportBoolean"><l><bool>true</bool></l></block><block s="reportBoolean"><l><bool>true</bool></l></block></list></block></custom-block></block><custom-block s="$cloudOutline MQTT subscribe to %s topic %s %br on each message run %cmdRing %mult%s"><block var="broker"/><block var="topic"/><block s="reifyScript"><script><block s="doIf"><block s="reportVariadicGreaterThan"><list><block s="reportApplyExtension"><l>txt_indexof(sub, txt)</l><list><l>/@</l><block var="received topic"/></list></block><l>0</l></list></block><script><block s="doApplyExtension"><l>err_try(cmd, catch, err)</l><list><block s="reifyScript"><script><block s="doSetVar"><l>resp</l><block s="evaluate"><block var="reply"/><list><block var="received payload"/><block var="received topic"/></list></block></block></script><list></list></block><block s="reifyScript"><script><block s="doSetVar"><l>resp</l><block s="evaluate"><block var="reply"/><list></list></block></block></script><list></list></block><block var="error"/></list></block><block s="doApplyExtension"><l>err_reset</l><list></list></block><block s="doSetVar"><l>callbackTopic</l><block s="reportListItem"><l><option>last</option></l><block s="reportTextSplit"><block var="received topic"/><l>@</l></block></block></block><custom-block s="$cloudOutline MQTT publish to %s topic %s payload %mlt %mult%s"><block var="broker"/><block var="callbackTopic"/><block var="resp"/><list><l></l><l></l><block s="reportListItem"><l>2</l><block var="options"/></block></list></custom-block></script><list></list></block></script><list><l>received payload</l><l>received topic</l></list></block><list><l>0</l><block s="reportListItem"><l>1</l><block var="options"/></block></list></custom-block></script></block-definition><block-definition s="$cloudOutline MQTT request %&apos;broker&apos; topic %&apos;topic&apos; $nl response topic %&apos;rtopic&apos; payload %&apos;payload&apos; $nl on response run %&apos;callback&apos; %&apos;options&apos;" type="command" category="MQTT"><comment x="0" y="0" w="242.99999999999997" collapsed="false">The options are not required but can be filled if needed.&#xD;&#xD;1. Append response topic (boolean): If true, the response topic is added at the end of the call topic after @ sign. The default condition (true) response topic is added.&#xD;&#xD;2. Sub binary mode (boolean) Default (false) - received payload is returned as text. &#xD;&#xD;If true,then the subscribed, received payload is returned as a single column list of values in the range of 0 to 255..  &#xD;&#xD;3.  Pub binary mode (boolean).  Default (false) - the payload is published as text.&#xD;&#xD;If set to true then published payload is expected to be a single column list of values in the 0 to 255 range and is published to the broker as a buffer of bytes.&#xD;&#xD;Note:  If the payload is a list and you don&apos;t set the buffer mode option, it will be automatically be converted into JSON and sent as text&#xD;&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%s">broker.emqx.io<options>broker.emqx.io&#xD;mqtt.eclipseprojects.io&#xD;test.mosquitto.org&#xD;broker.xmqtt.net&#xD;broker.hivemq.com</options></input><input type="%s">name</input><input type="%s">name2</input><input type="%mlt">hello</input><input type="%cmdRing"></input><input type="%mult%s" expand="append response topic&#xD;sub binary mode&#xD;pub binary mode&#xD;" max="3">true&#xD;false&#xD;false</input></inputs><script><block s="doDeclareVariables"><list><l>error</l><l>informTopic</l><l>topicCall</l></list></block><block s="doSetVar"><l>options</l><custom-block s="sanitise options %l mask %l"><block var="options"/><block s="reportNewList"><list><block s="reportBoolean"><l><bool>true</bool></l></block><block s="reportBoolean"><l><bool>true</bool></l></block><block s="reportBoolean"><l><bool>true</bool></l></block></list></block></custom-block></block><block s="doSetVar"><l>informTopic</l><block s="reportIfElse"><block s="reportIsA"><block s="reportListItem"><l>1</l><block var="options"/></block><l><option>Boolean</option></l></block><block s="reportListItem"><l>1</l><block var="options"/></block><block s="reportBoolean"><l><bool>true</bool></l></block></block></block><custom-block s="$cloudOutline MQTT subscribe to %s topic %s %br on each message run %cmdRing %mult%s"><block var="broker"/><block s="reportJoinWords"><list><block var="rtopic"/></list></block><block s="reifyScript"><script><block s="doApplyExtension"><l>err_try(cmd, catch, err)</l><list><block s="reifyScript"><script><block s="doRun"><block var="callback"/><list><block var="received payload"/><block var="received topic"/></list></block></script><list></list></block><block s="reifyScript"><script><block s="doRun"><block var="callback"/><list></list></block></script><list></list></block><block var="error"/></list></block></script><list><l>received payload</l><l>received topic</l></list></block><list><l>0</l><block s="reportListItem"><l>2</l><block var="options"/></block></list></custom-block><block s="doIfElse"><block var="informTopic"/><script><block s="doSetVar"><l>topicCall</l><block s="reportJoinWords"><list><block var="topic"/><l>/</l><block s="reportJoinWords"><list><l>@</l><block var="rtopic"/></list></block></list></block></block></script><script><block s="doSetVar"><l>topicCall</l><block var="topic"/></block></script></block><custom-block s="$cloudOutline MQTT publish to %s topic %s payload %mlt %mult%s"><block var="broker"/><block var="topicCall"/><block var="payload"/><list><l></l><l></l><block s="reportListItem"><l>3</l><block var="options"/></block></list></custom-block></script></block-definition><block-definition s="$cloudOutline MQTT example response reporter payload %&apos;payload&apos; topic %&apos;topic&apos;" type="reporter" category="MQTT"><comment x="0" y="0" w="90" collapsed="false">This is a simple echo example.&#xD;Topic can be used to filter the response.</comment><header></header><code></code><translations></translations><inputs><input type="%mlt">hello</input><input type="%txt">name</input></inputs><script><block s="doReport"><block var="payload"/></block></script></block-definition><block-definition s="$cloudOutline MQTT request %&apos;broker&apos; topic %&apos;topic&apos; $nl response topic %&apos;rtopic&apos; payload %&apos;payload&apos; %&apos;options&apos;" type="reporter" category="MQTT"><comment x="0" y="0" w="343" collapsed="false">The response topic should be a unique value for each call e.g. use timer&#xD;&#xD;The options are not required but can be filled if needed&#xD;&#xD;1.  Timeout value - default is 3 seconds&#xD;&#xD;2.  Append response topic (boolean): If true, the response topic is added at the end of the call topic after @ sign. The default condition (true) response topic is added.&#xD;&#xD;3. Sub binary mode (boolean) Default (false) - received payload is returned as text. &#xD;&#xD;If true, subscribed, received payload returned as single column list of values in the range of 0 to 255..  Default (false) - it is returned as text&#xD;&#xD;4.  Pub binary mode (boolean).  Default (false) - the payload is published as text.&#xD;&#xD;If set to true then published payload is expected to be a single column list of values in the 0 to 255 range and is published to the broker as a buffer of bytes.&#xD;&#xD;Note:  If the payload is a list and you don&apos;t set the buffer mode option, it will be automatically be converted into JSON and sent as text&#xD;&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%s">broker.emqx.io<options>broker.emqx.io&#xD;mqtt.eclipseprojects.io&#xD;test.mosquitto.org&#xD;broker.xmqtt.net&#xD;broker.hivemq.com</options></input><input type="%s">name</input><input type="%s">name2</input><input type="%mlt">hello</input><input type="%mult%s" expand="timeout&#xD;append response topic&#xD;sub binary mode&#xD;pub binary mode&#xD;" max="4">3&#xD;true&#xD;false&#xD;false</input></inputs><script><block s="doDeclareVariables"><list><l>resp</l><l>semaphore</l><l>timer0</l><l>timeout</l><l>informTopic</l><l>topicCall</l></list></block><block s="doSetVar"><l>options</l><custom-block s="sanitise options %l mask %l"><block var="options"/><block s="reportNewList"><list><l></l><block s="reportBoolean"><l><bool>true</bool></l></block><block s="reportBoolean"><l><bool>true</bool></l></block><block s="reportBoolean"><l><bool>true</bool></l></block></list></block></custom-block></block><block s="doSetVar"><l>semaphore</l><l>0</l></block><block s="doSetVar"><l>timeout</l><block s="reportIfElse"><block s="reportIsA"><block s="reportListItem"><l>1</l><block var="options"/></block><l><option>number</option></l></block><block s="reportListItem"><l>1</l><block var="options"/></block><l>3</l></block></block><block s="doSetVar"><l>informTopic</l><block s="reportIfElse"><block s="reportIsA"><block s="reportListItem"><l>2</l><block var="options"/></block><l><option>Boolean</option></l></block><block s="reportListItem"><l>2</l><block var="options"/></block><block s="reportBoolean"><l><bool>true</bool></l></block></block></block><block s="doSetVar"><l>resp</l><l>timeout</l></block><custom-block s="$cloudOutline MQTT subscribe to %s topic %s %br on each message run %cmdRing %mult%s"><block var="broker"/><block s="reportJoinWords"><list><block var="rtopic"/></list></block><block s="reifyScript"><script><block s="doSetVar"><l>resp</l><block var="received payload"/></block><block s="doSetVar"><l>semaphore</l><l>1</l></block></script><list><l>received payload</l><l>received topic</l></list></block><list><l>0</l><block s="reportListItem"><l>3</l><block var="options"/></block></list></custom-block><block s="doIfElse"><block var="informTopic"/><script><block s="doSetVar"><l>topicCall</l><block s="reportJoinWords"><list><block var="topic"/><l>/</l><block s="reportJoinWords"><list><l>@</l><block var="rtopic"/></list></block></list></block></block></script><script><block s="doSetVar"><l>topicCall</l><block var="topic"/></block></script></block><custom-block s="$cloudOutline MQTT publish to %s topic %s payload %mlt %mult%s"><block var="broker"/><block var="topicCall"/><block var="payload"/><list><l>0</l><l>false</l><block s="reportListItem"><l>4</l><block var="options"/></block></list></custom-block><block s="doSetVar"><l>timer0</l><block s="reportDate"><l><option>time in milliseconds</option></l></block></block><block s="doWaitUntil"><block s="reportVariadicOr"><list><block s="reportVariadicEquals"><list><block var="semaphore"/><l>1</l></list></block><block s="reportVariadicGreaterThan"><list><block s="reportDifference"><block s="reportDate"><l><option>time in milliseconds</option></l></block><block var="timer0"/></block><block s="reportVariadicProduct"><list><block var="timeout"/><l>1000</l></list></block></list></block></list></block></block><custom-block s="$cloudOutline MQTT unsubscribe from %s topic %s"><block var="broker"/><block s="reportJoinWords"><list><block var="rtopic"/></list></block></custom-block><block s="doReport"><block var="resp"/></block></script></block-definition><block-definition s="MQTT Extension Examples" type="command" category="MQTT"><comment x="0" y="0" w="385.9999999999999" collapsed="false">Open (edit) this block to look at examples how to use the MQTT Extension blocks&#xD;&#xD;Background documentation:&#xD;https://github.com/pixavier/mqtt4snap&#xD;&#xD;Last source code version (mqtt.xml and mqttExtension.js):&#xD;https://gitlab.com/cymplecy/Snap/-/tree/master/libraries</comment><header></header><code></code><translations></translations><inputs></inputs><scripts><comment x="489.99999999999955" y="215.19999999999987" w="222.99999999999997" collapsed="false">Step 0: Connect to the broker</comment><comment x="31.33333333333337" y="152.20000000000016" w="239.99999999999997" collapsed="false">PubSub Hello World!</comment><comment x="489.99999999999955" y="271.19999999999953" w="222" collapsed="false">Step 1: Subscribe to a topic</comment><script x="25.33333333333337" y="272.1999999999993"><custom-block s="$cloudOutline MQTT subscribe to %s topic %s %br on each message run %cmdRing %mult%s"><l>broker.emqx.io</l><l>name</l><block s="reifyScript"><script><block s="doSayFor"><block var="payload"/><l>2</l></block></script><list><l>payload</l><l>received topic</l></list></block><list></list></custom-block></script><script x="29.33333333333337" y="366.86666666666605"><custom-block s="$cloudOutline MQTT publish to %s topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><l>name</l><l>hello</l><list></list></custom-block></script><comment x="492.99999999999955" y="357.1999999999993" w="222" collapsed="false">Step 2: Publish a message</comment><script x="33.99999999999966" y="484.19999999999976"><custom-block s="$cloudOutline MQTT subscribe to %s topic %s %br on each message run %cmdRing %mult%s"><l>broker.emqx.io</l><l>name1</l><block s="reifyScript"><script><custom-block s="$cloudOutline MQTT publish to %s topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><l>name2</l><block var="payload"/><list></list></custom-block></script><list><l>payload</l><l>topic</l></list></block><list></list></custom-block></script><comment x="499" y="481.69999999999817" w="220" collapsed="false">Step 1: Activate the responder as a simple subscription</comment><script x="32.999999999999886" y="602.0333333333335"><block s="doSayFor"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><l>name1</l><l>name2</l><l>hello</l><list><l>3</l><l>false</l></list></custom-block><l>2</l></block></script><comment x="500" y="606.6999999999989" w="220" collapsed="false">Step 2: Send a request and wait the answer.</comment><comment x="504.99999999999955" y="131.19999999999993" w="191" collapsed="false">To execute the examples, single click on blocks, following the corresponding steps.</comment><comment x="499.66666666666697" y="756.3666666666654" w="224.00000000000003" collapsed="false">Step 2 bis: Send a request and do not wait for the answer</comment><comment x="24.33333333333337" y="871.1999999999987" w="356.99999999999994" collapsed="false">Synchronous client-server Hello World! with dynamic response topic (timer)</comment><comment x="510.99999999999955" y="930.700000000001" w="220" collapsed="false">Step 1: Activate the responder</comment><script x="34.33333333333337" y="1048.1999999999982"><block s="doSayFor"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %mult%s"><l>broker.emqx.io</l><l>name</l><block s="getTimer"></block><l>hello</l><list></list></custom-block><l>2</l></block></script><comment x="510.99999999999955" y="1050.6999999999987" w="219.0000000000002" collapsed="false">Step 2: Send a request (timer acts as idCall) and wait for the answer</comment><comment x="31.999999999999886" y="1138.6999999999982" w="352.0000000000003" collapsed="false">Asynchronous client-server Hello World! with dynamic response topic (timer)</comment><script x="31.999999999999886" y="1207.0333333333313"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %br on response run %cmdRing %mult%s"><l>broker.emqx.io</l><l>name</l><block s="getTimer"></block><l>hello</l><block s="reifyScript"><script><block s="doSayFor"><block var="payload"/><l>2</l></block></script><list><l>payload</l><l>topic</l></list></block><list></list></custom-block></script><comment x="514.9999999999995" y="1204.6999999999991" w="224.00000000000003" collapsed="false">Step 2 bis: Send a request (timer acts as idCall) and do not wait for the answer</comment><script x="28.99999999999966" y="225.2000000000001"><custom-block s="$cloudOutline MQTT connect to %s %mult%s"><l>broker.emqx.io</l><list></list></custom-block></script><script x="25.33333333333337" y="932.2000000000014"><custom-block s="$cloudOutline MQTT response %s topic %s %br reply %repRing %mult%s"><l>broker.emqx.io</l><l>name/#</l><block s="reifyReporter"><autolambda><custom-block s="$cloudOutline MQTT example response reporter payload %mlt topic %txt"><block var="payload"/><block var="topic"/></custom-block></autolambda><list><l>payload</l><l>topic</l></list></block><list></list></custom-block></script><comment x="26.999999999999886" y="685.6999999999982" w="372.0000000000004" collapsed="false">Asynchronous client-server Hello World! with static response topic (name2)</comment><script x="27.999999999999886" y="751.0333333333324"><custom-block s="$cloudOutline MQTT request %s topic %s %br response topic %s payload %mlt %br on response run %cmdRing %mult%s"><l>broker.emqx.io</l><l>name1</l><l>name2</l><l>hello</l><block s="reifyScript"><script><block s="doSayFor"><block var="payload"/><l>2</l></block></script><list><l>payload</l><l>topic</l></list></block><list><l>false</l></list></custom-block></script><comment x="28.999999999999886" y="412.36666666666696" w="361.99999999999994" collapsed="false">Synchronous client-server Hello World! with static response topic (name2)</comment></scripts></block-definition><block-definition s="sanitise options %&apos;data&apos; mask %&apos;mask&apos;" type="reporter" category="MQTT" helper="true"><comment x="0" y="0" w="226" collapsed="false">Modify V10 variadic defaults to be able to work for blank and psuedo (false/true) boolean entries&#xD;&#xD;Blank defaults are set as zero width spaces which are removed when block is executed&#xD;&#xD;This is needed for the connect block&#xD;&#xD;The options are then checked to see if they should be boolean and if they are not aready a boolean value, then they are replaced with boolean true if default is text &quot;true&quot;, otherwise boolean false.</comment><header></header><code></code><translations></translations><inputs><input type="%l" initial="1"></input><input type="%l" initial="1"></input></inputs><script><block s="doDeclareVariables"><list><l>zero width space</l></list></block><block s="doSetVar"><l>zero width space</l><block s="reportUnicodeAsLetter"><l>8203</l></block></block><block s="doSetVar"><l>data</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportIsA"><block var="value"/><l><option>text</option></l></block><block s="reportCombine"><block s="reportTextSplit"><block var="value"/><block var="zero width space"/></block><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><l></l><l></l><l></l></list></block></autolambda><list></list></block></block><block var="value"/></block></autolambda><list><l>value</l></list></block><block var="data"/></block></block><block s="doReport"><block s="reportListAttribute"><l><option>flatten</option></l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportVariadicAnd"><list><block s="reportIsA"><block s="reportListItem"><l>2</l><block var="value"/></block><l><option>Boolean</option></l></block><block s="reportNot"><block s="reportIsA"><block s="reportListItem"><l>1</l><block var="value"/></block><l><option>Boolean</option></l></block></block></list></block><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportListItem"><l>1</l><block var="value"/></block><l>true</l></list></block><block s="reportBoolean"><l><bool>true</bool></l></block><block s="reportBoolean"><l><bool>false</bool></l></block></block><block s="reportListItem"><l>1</l><block var="value"/></block></block></autolambda><list><l>value</l><l>index</l></list></block><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportNewList"><list><block var="value"/><block s="reportListItem"><block var="index"/><block var="mask"/></block></list></block></autolambda><list><l>value</l><l>index</l></list></block><block var="data"/></block></block></block></block></script></block-definition><block-definition s="%&apos;data&apos; to base64" type="reporter" category="MQTT"><comment x="0" y="0" w="290" collapsed="false">Encode costume, sound or data to Base64</comment><header></header><code></code><translations></translations><inputs><input type="%s" initial="1"></input></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqttExtension.js</l></list></block><block s="doReport"><block s="reportApplyExtension"><l>mqt_to_base64(media_or_data)</l><list><block var="data"/></list></block></block></script></block-definition><block-definition s="%&apos;data&apos; from base64 %&apos;options&apos;" type="reporter" category="MQTT"><comment x="0" y="0" w="290" collapsed="false">Decode costume, sound or data from Base64</comment><header></header><code></code><translations></translations><inputs><input type="%s" initial="1"></input><input type="%mult%b" expand="as list" max="1">true</input></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>libraries/mqttExtension.js</l></list></block><block s="doIf"><block s="reportListItem"><l>1</l><block var="options"/></block><script><block s="doReport"><block s="reportApplyExtension"><l>mqt_binary_to_list(bytes)</l><list><block s="reportApplyExtension"><l>mqt_from_base64(b64)</l><list><block s="reportListItem"><l><option>last</option></l><block s="reportTextSplit"><block var="data"/><l>,</l></block></block></list></block></list></block></block></script><list><l><bool>true</bool></l><script><block s="doReport"><block s="reportApplyExtension"><l>mqt_from_base64(b64)</l><list><block var="data"/></list></block></block></script></list></block></script></block-definition></blocks><primitives></primitives><stage name="Stage" width="480" height="360" costume="0" color="255,255,255,1" tempo="60" threadsafe="false" penlog="false" volume="100" pan="0" lines="round" ternary="false" hyperops="true" codify="false" inheritance="true" sublistIDs="false" id="1313"><pentrails>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAFoCAYAAACPNyggAAAAAXNSR0IArs4c6QAADoVJREFUeF7t1cEJAAAIxDDdf2m3sJ+4wEEQuuMIECBAgACBd4F9XzRIgAABAgQIjAB7AgIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECByxcQFpoRMBzwAAAABJRU5ErkJggg==</pentrails><costumes><list struct="atomic" id="1314"></list></costumes><sounds><list struct="atomic" id="1315"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites select="1"><sprite name="Sprite" idx="1" x="0" y="0" heading="90" scale="1" volume="100" pan="0" rotation="1" draggable="true" costume="0" color="80,80,80,1" pen="tip" id="1320"><costumes><list struct="atomic" id="1321"></list></costumes><sounds><list struct="atomic" id="1322"></list></sounds><blocks></blocks><variables></variables><scripts></scripts></sprite><watcher var="usermac" style="normal" x="10" y="10" color="243,118,29" hidden="true"/><watcher var="json data" style="normal" x="13" y="54.000001999999995" color="243,118,29"/></sprites></stage><variables><variable name="json data"><l>{&#xD;  "LDR": 1758,&#xD;  "T": 23.89,&#xD;  "RH": 37.1,&#xD;  "IAQ": 385,&#xD;  "P": 1009.02,&#xD;  "G": 196.67,&#xD;  "Gs": 0,&#xD;  "RHs": 23,&#xD;  "Estat": 0,&#xD;  "CO2_ppm": 1067&#xD;}</l></variable><variable name="usermac"><l>user001/CC50E3A8FA64</l></variable></variables></scene></scenes></project>